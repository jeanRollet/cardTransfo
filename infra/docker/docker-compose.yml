  version: '3.8'

  networks:
    carddemo-net:
      driver: bridge

  volumes:
    postgres-data:
    redis-data:

  services:
    postgresql:
      image: postgres:16-alpine
      container_name: carddemo-postgres
      environment:
        POSTGRES_DB: carddemo
        POSTGRES_USER: carddemo
        POSTGRES_PASSWORD: carddemo123
      volumes:
        - postgres-data:/var/lib/postgresql/data
      ports:
        - "5432:5432"
      networks:
        - carddemo-net
      restart: unless-stopped

    redis:
      image: redis:7-alpine
      container_name: carddemo-redis
      command: redis-server --requirepass carddemo123
      volumes:
        - redis-data:/data
      ports:
        - "6379:6379"
      networks:
        - carddemo-net
      restart: unless-stopped

    frontend:
      image: nginx:alpine
      container_name: carddemo-frontend
      ports:
        - "3000:80"
      networks:
        - carddemo-net
      volumes:
        - ./frontend:/usr/share/nginx/html:ro
      restart: unless-stopped
